<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

	<p:commandButton value="#{msg['button.record']}" id="record"
		actionListener="#{folderBean.recordFolder()}" update="@(.modelOrder, .folder, .growl)"
		style="background:#4d90fe;color:#fff;border:none;text-shadow: none;"  />
	
	<p:growl id="growl"  styleClass="growl"/>

	<p:fieldset legend="#{msg['folder.generalInformation']}"
		styleClass="consLegend">
		<div class="ui-fluid">
			<h:panelGrid columns="8" cellpadding="5" style="width:100%"
				columnClasses="ui-grid-col-2,ui-grid-col-3,ui-grid-col-2,ui-grid-col-1,ui-grid-col-1,ui-grid-col-1,ui-grid-col-1,ui-grid-col-1">

				<h:outputLabel value="#{msg['folder.addiction']}" />
				<p:selectManyCheckbox id="basic"
					value="#{folderBean.folderDto.addiction}">
					<f:selectItem itemLabel="#{msg['folder.smoking']}"
						itemValue="smoking" />
					<f:selectItem itemLabel="#{msg['folder.alcohol']}"
						itemValue="alcohol" />
					<f:selectItem itemLabel="#{msg['folder.drugs']}" itemValue="drugs" />
				</p:selectManyCheckbox>

				<h:outputLabel value="#{msg['folder.bloodGroup']}"
					style="margin-left: 22%;" />
				<p:selectOneMenu value="#{folderBean.folderDto.bloodGroup}">
					<f:selectItem itemLabel="O+" itemValue="oplus"
						noSelectionOption="true" />
					<f:selectItem itemLabel="A+" itemValue="aplus" />
					<f:selectItem itemLabel="B+" itemValue="bplus" />
					<f:selectItem itemLabel="AB+" itemValue="abplus" />
					<f:selectItem itemLabel="O-" itemValue="oless" />
					<f:selectItem itemLabel="A-" itemValue="aless" />
					<f:selectItem itemLabel="B-" itemValue="bless" />
					<f:selectItem itemLabel="AB-" itemValue="abless" />
				</p:selectOneMenu>

				<h:outputLabel for="minMax" value="#{msg['folder.size']}"
					style="margin-left: 40%;" />
				<p:spinner id="minMax" value="#{folderBean.folderDto.size}"
					min="0.0"  stepFactor="0.25"/>

				<h:outputLabel for="weight" value="#{msg['folder.weight']}"
					style="margin-left: 40%;" />
				<p:spinner id="weight" value="#{folderBean.folderDto.weight}"
					 min="0" stepFactor="0.25"/>
			</h:panelGrid>

			<h:panelGrid columns="4" cellpadding="5" style="width:100%"
				styleClass="gridSpace"
				columnClasses="ui-grid-col-2,ui-grid-col-4,ui-grid-col-1,ui-grid-col-6">
				<h:outputLabel value="#{msg['folder.allergy']}" />
				<p:inputTextarea id="alerrgy" rows="1" cols="20"
					style="width:100%; height:100%;"
					value="#{folderBean.folderDto.allergy}" styleClass="allergy" />

				<p:commandButton actionListener="#{folderBean.selectAllergy()}"
					update="@(.allergy)" icon="fa fa-arrow-left "
					styleClass="buttonAwsome" style="width:50%; text-align: center;">
				</p:commandButton>


				<p:selectOneMenu styleClass="selectedAllergy"
					value="#{folderBean.selectedAllergy}" filter="true" filterMatchMode="contains">

					<f:selectItem itemLabel="#{msg['folder.allergy']}" itemValue=""
						noSelectionOption="true" />

					<f:selectItems value="#{folderBean.allergyList}" var="var"
						itemLabel="#{var.allergy}" itemValue="#{var.allergy}" />


					<p:ajax process="@this" partialSubmit="true" event="blur"
						listener="#{folderBean.selectedOneInit}" />
				</p:selectOneMenu>

			</h:panelGrid>

			<h:panelGrid columns="2" cellpadding="5" style="width:100%"
				columnClasses="ui-grid-col-2,ui-grid-col-10">
				<h:outputLabel for="minMax" value="#{msg['folder.antecedents']}" />
				<p:inputText value="#{folderBean.folderDto.antecedents}"
					style="width:100%"></p:inputText>

				<h:outputLabel for="minMax" value="#{msg['folder.riskFactors']}" />
				<p:inputText value="#{folderBean.folderDto.riskFactors}"
					style="width:100%"></p:inputText>

				<h:outputLabel for="minMax" value="#{msg['folder.comment']}" />
				<p:inputText value="#{folderBean.folderDto.comment}"
					style="width:100%"></p:inputText>
			</h:panelGrid>
		</div>
	</p:fieldset>

	<p:fieldset legend="#{msg['folder.surgicalHistory']}"
		styleClass="Surgical consLegend">
		<div class="ui-fluid">
			<h:panelGrid columns="6" cellpadding="5" style="width:100%"
				styleClass="gridSpace"
				columnClasses="ui-grid-col-2,ui-grid-col-3,ui-grid-col-1,ui-grid-col-3,ui-grid-col-1,ui-grid-col-2">

				<h:outputLabel for="minMax" value="#{msg['folder.act']}" />
				<p:inputText value="#{folderBean.surgicalHistoryDto.act}"
					style="width:100%"></p:inputText>

				<h:outputLabel for="minMax" value="#{msg['folder.operator']}"
					style="margin-left:7%;" />
				<p:inputText value="#{folderBean.surgicalHistoryDto.operator}"
					style="width:100%"></p:inputText>

				<h:outputLabel for="minMax" value="#{msg['folder.place']}"
					style="margin-left:40%;" />
				<p:inputText value="#{folderBean.surgicalHistoryDto.place}"
					style="width:100%"></p:inputText>
			</h:panelGrid>
			<br />
			<h:panelGrid columns="5" cellpadding="5" style="width:100%"
				styleClass="gridSpace"
				columnClasses="ui-grid-col-2,ui-grid-col-3,ui-grid-col-2,ui-grid-col-4,ui-grid-col-1,">

				<h:outputLabel for="minMax" value="#{msg['folder.evolution']}" />
				<p:inputText value="#{folderBean.surgicalHistoryDto.evolution}"
					style="width:100%"></p:inputText>

				<h:outputLabel for="minMax" value="#{msg['folder.comment']}"
					style="margin-left:7%;" />
				<p:inputText value="#{folderBean.surgicalHistoryDto.comment}"
					style="width:100%"></p:inputText>

				<p:commandButton actionListener="#{folderBean.addSurgicalHistory}"
					update="@(.allergy, .selectedSurgical, .Surgical)"
					icon="fa fa-plus " styleClass="buttonAwsome"
					style="width:50%; float:right;">
				</p:commandButton>

			</h:panelGrid>
		</div>
		<br />
		<h:form>
			<p:dataTable var="selectedSurgical"
				value="#{folderBean.folderDto.surgicalHistory}"
				selectionMode="single" selection="#{folderBean.selectedSurgical}"
				rowKey="#{selectedSurgical}"
				emptyMessage="#{msg['clients.emptyList']}"
				widgetVar="selectedSurgical" scrollable="false" scrollHeight="500"
				frozenRows="0" styleClass="selectedSurgical">

				<p:ajax event="rowSelect" oncomplete="PF('surgicalDialog').show()"
					update="@(.surgicalDialog)" />

				<p:column filterStyle="display:none">
					<h:outputText value="#{selectedSurgical.act}" />
				</p:column>

				<p:column style="width:56px;text-align: center">

					<p:commandButton
						actionListener="#{folderBean.removeSelectedSurgical(selectedSurgical)}"
						update="@(.selectedSurgical)" icon="fa fa-times" styleClass="buttonAwsome"
						process="@this" />

				</p:column>
			</p:dataTable>
		</h:form>
		<h:form>
			<p:dialog header="#{folderBean.selectedSurgical.act}"
				widgetVar="surgicalDialog" resizable="false"
				styleClass="surgicalDialog">

				<h:panelGrid columns="2" cellpadding="5" styleClass="Surgical">

					<h:outputLabel for="minMax" value="#{msg['folder.operator']}" />
					<p:inputText value="#{folderBean.selectedSurgical.operator}" />

					<h:outputLabel for="minMax" value="#{msg['folder.place']}" />
					<p:inputText value="#{folderBean.selectedSurgical.place}" />

					<h:outputLabel for="minMax" value="#{msg['folder.evolution']}" />
					<p:inputText value="#{folderBean.selectedSurgical.evolution}" />

					<h:outputLabel for="minMax" value="#{msg['folder.comment']}" />
					<p:inputText value="#{folderBean.selectedSurgical.comment}" />

				</h:panelGrid>

				<f:facet name="footer">

					<p:commandButton value="#{msg['button.record']}"
						icon="ui-icon-disk" update="@(.surgicalDialog, .selectedSurgical)"
						oncomplete="handleSurgicalRequest(xhr, status, args)" />
				</f:facet>


			</p:dialog>

		</h:form>
	</p:fieldset>

	<p:fieldset legend="#{msg['folder.medicationHistory']}"
		styleClass="historicalDrug consLegend">
		<div class="ui-fluid">
			<h:form>
				<h:panelGrid columns="4" cellpadding="5" style="width:100%"
					styleClass="gridSpace"
					columnClasses="ui-grid-col-5,ui-grid-col-1,ui-grid-col-5,ui-grid-col-1">

					<p:inputTextarea rows="1" cols="20"
						style="width:100%; height:100%;" value="#{folderBean.drug}"
						styleClass="drug" />

					<p:commandButton actionListener="#{folderBean.selectDrug()}"
						process="@form" update="@(.drug)" icon="fa fa-arrow-left "
						style="width:50%; text-align: center;" styleClass="buttonAwsome">
					</p:commandButton>

					<p:selectOneMenu value="#{folderBean.selectedDrug}" filter="true"
						filterMatchMode="contains">

						<f:selectItem itemLabel="#{msg['order.rightListNameDrug']}"
							id="cc" itemValue="" noSelectionOption="true" />

						<f:selectItems value="#{orderBean.drugList}" var="var"
							itemLabel="#{var.drug}" itemValue="#{var.drug}" />

						<p:ajax process="@this" partialSubmit="true"
							listener="#{folderBean.selectedOneInit}" />
					</p:selectOneMenu>

					<p:commandButton actionListener="#{folderBean.addDrug()}"
						update="@(.historicalDrug)" icon="fa fa-plus " process="@form"
						style="width:50%; float:right;" styleClass="buttonAwsome">
					</p:commandButton>
				</h:panelGrid>
			</h:form>
		</div>
		<br />

		<p:dataTable var="selectedDrug"
			value="#{folderBean.folderDto.medicationHistory}"
			styleClass="selectedDrug" emptyMessage="#{msg['clients.emptyList']}">
			<p:column>
				<h:outputText value="#{selectedDrug}" />
			</p:column>

			<p:column style="width:56px;text-align: center">

				<p:commandButton
					actionListener="#{folderBean.removeSelectedDrug(selectedDrug)}"
					update="@(.selectedDrug)" icon="fa fa-times" styleClass="buttonAwsome"
					process="@this" />

			</p:column>
		</p:dataTable>

	</p:fieldset>

	<p:fieldset legend="#{msg['folder.vaccines']}"
		styleClass="vaccines consLegend">
		<div class="ui-fluid">
			<h:form>
				<h:panelGrid columns="5" cellpadding="5" style="width:100%"
					styleClass="gridSpace"
					columnClasses="ui-grid-col-5,ui-grid-col-1,ui-grid-col-5,ui-grid-col-1">

					<p:inputTextarea rows="1" cols="20"
						style="width:100%; height:100%;" value="#{folderBean.vaccine}"
						styleClass="vaccine" />

					<p:commandButton actionListener="#{folderBean.selectVaccine()}"
						process="@form" update="@(.vaccine)" icon="fa fa-arrow-left "
						style="width:50%; " styleClass="buttonAwsome">
					</p:commandButton>

					<p:selectOneMenu value="#{folderBean.selectedVaccine}"
						filter="true" filterMatchMode="contains">

						<f:selectItem itemLabel="#{msg['folder.vaccines']}" id="cc"
							itemValue="" noSelectionOption="true" />

						<f:selectItems value="#{folderBean.vaccinesList}" var="var"
							itemLabel="#{var.vaccine}" itemValue="#{var.vaccine}" />

						<p:ajax process="@this" partialSubmit="true"
							listener="#{folderBean.selectedOneInit}" />
					</p:selectOneMenu>

					<p:commandButton actionListener="#{folderBean.addVaccine()}"
						update="@(.vaccines)" icon="fa fa-plus " process="@form"
						style="width:50%; float:right;" styleClass="buttonAwsome">
					</p:commandButton>
				</h:panelGrid>
			</h:form>
		</div>
		<br />

		<p:dataTable var="selectedVaccine"
			value="#{folderBean.folderDto.vaccins}" styleClass="selectedVaccine"
			emptyMessage="#{msg['clients.emptyList']}">
			<p:column>
				<h:outputText value="#{selectedVaccine}" />
			</p:column>

			<p:column style="width:56px;text-align: center">

				<p:commandButton
					actionListener="#{folderBean.removeSelectedVaccine(selectedVaccine)}"
					update="@(.selectedVaccine)" icon="fa fa-times" styleClass="buttonAwsome"
					process="@this" />




			</p:column>
		</p:dataTable>

	</p:fieldset>

<br/><br/>

	<script type="text/javascript">
		function handleSurgicalRequest(xhr, status, args) {

			PF('surgicalDialog').hide();
		}
		
	</script>


	<style>
.gridSpace .ui-panelgrid td {
	padding: 2px 5px;
}

.ui-selectmanycheckbox label {
	margin-right: 12px;
	padding-left: 4%;
}

.gridSpace .ui-grid-col-1 {
	text-align: center;
}

.ui-button.buttonAwsome {
	background-color: #f6f7f9;
	border-color: #ced0d4;
	color: #4b4f56;
}
</style>

</ui:composition>