<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">


	<div class="ui-grid ui-grid-responsive">

		<div class="ui-grid-row">
			<div class="ui-grid-col-7">
				<h:form>


					<p:commandButton value="#{msg['button.print']}"
						actionListener="#{orderBean.editor()}"
						oncomplete="PF('editor').show()" update="@(.editor)"
						icon="ui-icon-print" />

					<p:commandButton value="#{msg['button.certificate']}"
						actionListener="#{orderBean.certificate()}"
						oncomplete="PF('certificate').show()" update="@(.certificate)"
						icon="fa fa-certificate" />

					<div id="editor" styleClass="editor">
						<p:dialog widgetVar="editor">
							<p:editor id="editor" widgetVar="editorWidget"
								value="#{orderBean.editorText}" width="600" height="300"
								styleClass="editor" />
						</p:dialog>
						<p:dialog widgetVar="certificate">
							<p:editor id="certificate" widgetVar="certificateWidget"
								value="#{orderBean.editorText}" width="600" height="300"
								styleClass="certificate" />

						</p:dialog>

					</div>

				</h:form>

				<p:panel id="model">

					<p:commandButton value="#{msg['button.load']}" id="load"
						actionListener="#{orderBean.loadOrder()}"
						update="@(.selectedDrug, .biology, .radiology , .modelOrder)"
						icon="fa fa-arrow-down text-success" styleClass="modelButton" />

					<p:commandButton value="#{msg['button.unload']}" id="unload"
						actionListener="#{orderBean.unloadOrder()}"
						update="@(.selectedDrug, .biology, .radiology, .modelOrder, .drug)"
						icon="fa fa-arrow-up text-primary" styleClass="modelButton" />

					<p:commandButton value="#{msg['button.record']}" id="record"
						actionListener="#{orderBean.recordOrder()}"
						update="@(.modelOrder, .modelOrder)" icon="ui-icon-disk"
						styleClass="modelButton" style="width:25%;" />

					<p:commandButton value="#{msg['button.remove']}" id="remove"
						actionListener="#{orderBean.removeOrder}"
						update="@(.modelOrder, .selectedDrug, .biology, .radiology)"
						icon="fa fa-times" styleClass="modelButton buttonAwsome"  />

					<div class="ui-fluid">

						<p:selectOneMenu id="modelOrder"
							styleClass="modelOrder "
							value="#{orderBean.selectedOrder}"
							style=" width: 99.4% !important;">
							<f:selectItem itemLabel="#{msg['consultation.select']}"
								itemValue="" noSelectionOption="true" />
							<f:selectItems value="#{orderBean.orderListDate}" var="orderDate"
								itemLabel="#{msg['order.name']}   #{orderDate}"
								itemValue="#{orderDate}" />
							<p:ajax listener="#{orderBean.loadOrder()}"
								update="@(.selectedDrug, .biology, .radiology)" />
						</p:selectOneMenu>
					</div>


				</p:panel>
				<p:panel styleClass="panelCons">

					<h:panelGrid id="leftColone" columns="1" layout="grid"
						style="width:100%; height:100%;">

						<p:fieldset id="drug" legend="#{msg['order.drugs']}"
							styleClass="consLegend">

							<h:panelGrid columns="2" style="width:100% ;padding:0; margin:0" columnClasses="ui-grid-col-10,ui-grid-col-1">
								<h:inputText id="left" style="width:100%"
									value="#{orderBean.drugName}" styleClass="drug">
									<p:ajax event="click" update="right"
										listener="#{orderBean.updateRightTable( orderBean.isDrug)}" />
								</h:inputText>

								<p:commandButton actionListener="#{orderBean.addToSelectedDrug}"
									update="@(.selectedDrug, .rightList, .drug)"
									icon="fa fa-plus btn-sucsess"
									style="float: right;"  styleClass="buttonAwsome" />
							</h:panelGrid>


							<p:dataTable var="selectedDrug"
								value="#{orderBean.selectedDrugs}" selectionMode="single"
								selection="#{orderBean.selectedDrug}"
								rowKey="#{selectedDrug.drug}"
								emptyMessage="#{msg['clients.emptyList']}"
								widgetVar="selectedDrug" scrollable="false" scrollHeight="500"
								frozenRows="0" styleClass="selectedDrug">

								<p:ajax event="rowSelect" oncomplete="PF('drugDialog').show()"
									update="@(.drugDialog, .drugDialog) " />

								<p:ajax event="rowUnselect"
									listener="#{clientBean.onRowUnselect}" />
								<p:column filterStyle="display:none">
									<h:outputText value="#{selectedDrug.drug}" />
								</p:column>

								<p:column style="width:56px;text-align: center">

									<p:commandButton
										actionListener="#{orderBean.removeSelectedDrug(selectedDrug)}"
										update="@(.selectedDrug)" icon="fa fa-times "
										style="background:none; border:none;" styleClass="buttonAwsome"/>

								</p:column>
							</p:dataTable>


						</p:fieldset>


						<p:dialog header="#{orderBean.selectedDrug.drug}" width="40%"
							height="200" widgetVar="drugDialog" resizable="false"
							rendered="#{not empty orderBean.selectedDrug}"
							styleClass="drugDialog">

							<p:panelGrid styleClass=" drugDetail ui-panelgrid-blank">
								<p:row>
									<p:column>
										<h:panelGrid columns="1">
											<h:outputLabel for="amount" value="#{msg['drug.amount']}  " />
											<h:panelGrid columns="1">
												<p:spinner id="amount" size="6"
													value="#{orderBean.selectedDrug.amount}" min="0" max="100" />
											</h:panelGrid>
										</h:panelGrid>
									</p:column>
									<p:column>
										<h:panelGrid columns="1">
											<h:outputLabel for="morning" value="#{msg['drug.morning']}  " />
											<h:panelGrid columns="1">
												<p:spinner id="morning" size="6"
													value="#{orderBean.selectedDrug.morning}" min="0" max="100" />
											</h:panelGrid>
										</h:panelGrid>
									</p:column>
									<p:column>
										<h:panelGrid columns="1">
											<h:outputLabel for="noon" value="#{msg['drug.noon']}  " />
											<h:panelGrid columns="1">
												<p:spinner id="noon" value="#{orderBean.selectedDrug.noon}"
													min="0" max="100" size="6" />
											</h:panelGrid>
										</h:panelGrid>
									</p:column>
									<p:column>
										<h:panelGrid columns="1">
											<h:outputLabel for="evening" value="#{msg['drug.evening']}  " />
											<h:panelGrid columns="1">
												<p:spinner id="evening" size="6"
													value="#{orderBean.selectedDrug.evening}" min="0" max="100" />
											</h:panelGrid>
										</h:panelGrid>
									</p:column>
								</p:row>
								<p:row>
									<p:column colspan="2">
										<h:panelGrid columns="1">
											<p:outputLabel for="calendar" value="#{msg['drug.start']} " />
											<h:panelGrid columns="1" style="width:100%">
												<p:calendar id="calendar"
													value="#{orderBean.selectedDrug.startDate}" />
											</h:panelGrid>
										</h:panelGrid>
									</p:column>
									<p:column colspan="1">
										<h:panelGrid columns="1">
											<h:outputLabel for="duration"
												value="#{msg['drug.duration']}  " />
											<h:panelGrid columns="1">
												<div class="ui-g">
													<p:spinner id="duration" size="4"
														value="#{orderBean.selectedDrug.duration}" min="0"
														max="100" />
												</div>


											</h:panelGrid>
										</h:panelGrid>
									</p:column>
									<p:column colspan="1">
										<h:panelGrid columns="1">
											<h:outputLabel />
											<p:panelGrid>
												<div class="ui-fluid">
													<div class="ui-g">

														<p:selectOneMenu id="console" styleClass="drugDate"
															value="#{orderBean.selectedDrug.date}">
															<f:selectItem itemLabel="#{msg['drug.day']}"
																itemValue="day" />
															<f:selectItem itemLabel="#{msg['drug.week']}"
																itemValue="week" />
															<f:selectItem itemLabel="#{msg['drug.month']}"
																itemValue="month" />
															<f:selectItem itemLabel="#{msg['drug.year']}"
																itemValue="year" />
														</p:selectOneMenu>
													</div>
												</div>
											</p:panelGrid>
										</h:panelGrid>
									</p:column>

								</p:row>
								<p:row>
									<p:column colspan="4">
										<p:panelGrid columns="2"
											columnClasses="ui-grid-col-2,ui-grid-col-10" layout="grid"
											styleClass="ui-panelgrid-blank">
											<h:outputLabel for="note" value="#{msg['drug.note']}  " />
											<p:inputText id="note" value="#{orderBean.selectedDrug.note}"
												style="width:97%" />
										</p:panelGrid>
									</p:column>
								</p:row>
							</p:panelGrid>

							<f:facet name="footer">
								<p:commandButton value="#{msg['button.concel']}" type="reset"
									 update="@(.drugDialog)"
									styleClass="buttonDialog"
									style="background:#ff6d6f;color:#fff;border:none;text-shadow: none;float:right" />
								<p:commandButton value="#{msg['button.confirm']}"
									id="recordDrug" update="@(.drugDialog, .selectedDrug)"
									styleClass="buttonDialog" oncomplete="PF('drugDialog').hide()"
									style="background:#65bf1f;color:#fff;border:none;text-shadow: none;float:right" />

							</f:facet>
						</p:dialog>

					</h:panelGrid>

					<h:panelGrid columns="2" layout="grid"
						style="width:100%; height:100%;">
						<p:fieldset id="biologys" legend="#{msg['order.biology']}"
							styleClass="consLegend">

							<h:panelGrid columns="2" layout="grid" columnClasses="ui-grid-col-10,ui-grid-col-1"
								style="width:100%; height:100%;">

								<h:inputTextarea id="biology" value="#{orderBean.biology}"
									rows="3" cols="10" style="width:100%;"
									styleClass="biology">
									<p:ajax event="click" update="right"
										listener="#{orderBean.updateRightTable( orderBean.isBiology )}" />
								</h:inputTextarea>

								<p:commandButton
									actionListener="#{orderBean.leftToRight( orderBean.isBiology )}"
									update="@(.selectedDrug, .rightList)" icon="fa fa-arrow-right "
									style="width:60%; float: right;" styleClass="buttonAwsome"/>

							</h:panelGrid>

						</p:fieldset>


					</h:panelGrid>


					<h:panelGrid columns="2" layout="grid"
						style="width:100%; height:100%;">
						<p:fieldset id="radiology" legend="#{msg['order.radiology']}"
							styleClass="consLegend">

							<h:panelGrid columns="2" layout="grid" columnClasses="ui-grid-col-10,ui-grid-col-1"
								style="width:100%; height:100%;">

								<h:inputTextarea id="radiologys" value="#{orderBean.radiology}"
									rows="3" cols="10" style="width:100%; "
									styleClass="radiology">
									
									<p:ajax event="click" update="right"
										listener="#{orderBean.updateRightTable( orderBean.isRadiology )}" />
								</h:inputTextarea>

								<p:commandButton
									actionListener="#{orderBean.leftToRight( orderBean.isRadiology )}"
									update="@(.selectedDrug, .rightList)" icon="fa fa-arrow-right "
									style="width:60%; float: right;" styleClass="buttonAwsome" />

							</h:panelGrid>

						</p:fieldset>


					</h:panelGrid>

				</p:panel>
			</div>
			<div class="ui-grid-col-5">
				<p:dataTable id="right" var="var"
					value="#{orderBean.rightAvailable}" selectionMode="multiple"
					selection="#{orderBean.rightSelected}" rowKey="#{var}"
					emptyMessage="#{msg[orderBean.rightListName.concat('.emptyList')]}"
					widgetVar="vars" scrollable="true" scrollHeight="500"
					frozenRows="0" styleClass="rightList"
					update="@(.biology, .radiology .selectedDrug)">
					<f:facet name="header">
						<p:outputPanel style="text-align:left;" class=" has-feedback">

							<h:inputText id="globalFilter" onkeyup="PF('vars').filter()"
								pt:placeholder="#{msg['filter.search']}"
								placeholder="#{msg['filter.search']}" icon="ui-icon-search"
								style="width:100%;" />
							<i class="glyphicon glyphicon-search form-control-feedback"></i>
						</p:outputPanel>

					</f:facet>
					<p:ajax event="rowDblselect"
						update="@(.selectedDrug, .biology, .radiology)"
						listener="#{orderBean.rightToLeft}">

					</p:ajax>


					<p:column filterBy="#{var}"
						headerText="#{msg[orderBean.rightListName]}"
						filterStyle="display:none">
						<h:outputText value="#{var}" />
					</p:column>


				</p:dataTable>
			</div>
		</div>

	</div>

	<script type="text/javascript">
		function handleLoginRequest(xhr, status, args) {

			PF('drugDialog').hide();
		}
		
// 		Function handleHideRequest(xhr, status, args){
// 			PF('editorWidget').hide();
// 		}
	</script>
	<style>
.ui-picklist-button-add-all, .ui-picklist-button-remove-all {
	visibility: hidden !important;
}

legend a {
	color: inherit;
}

legend.legendStyle {
	padding-left: 5px;
	padding-right: 5px;
}

fieldset.fsStyle {
	font-family: Verdana, Arial, sans-serif;
	font-size: small;
	font-weight: normal;
	border: 1px solid #999999;
	padding: 4px;
	margin: 5px;
}

legend.legendStyle {
	font-size: 90%;
	color: #888888;
	background-color: transparent;
	font-weight: bold;
}

legend {
	width: auto;
	border-bottom: 0px;
}

myFieldset .ui-fieldset, .ui-fieldset .ui-fieldset-legend {
	background-color: transparent;
	border-color: transparent;
}

.ui-panelgrid td {
	padding: 2px 5px;
}

.ui-button.removeButton {
	color: #ffffff;
	background: #29b6a0;
	border-color: #23a38f;
	width: 100%;
	height: 25px;
	font-family: 'pluto_sansthin';
	font-size: 1.4em;
}

.drugDetail .ui-panelgrid-cell {
	font-size: 14px;
	padding: 0;
}

.buttonDialog {
	width: 23%;
	margin-bottom: 5px;
}
</style>
</ui:composition>