<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

	<h:form id="consultation" style="background: #f5f5f5">
		<div class="ui-fluid">
			<div class="ui-grid ui-grid-responsive">
				<div class="ui-grid-row">
					<div class="ui-grid-col-7">

						<p:panel
							style="background: #f5f5f5 none repeat scroll 0 0;border:none">

							<p:commandButton value="#{msg['button.load']}" id="load"
								actionListener="#{clientBean.onConsultationChange()}"
								update="@(.reason, .examinations, .diagnostics, .consulList)"
								icon="fa fa-arrow-down text-success" styleClass="modelButton" />

							<p:commandButton value="#{msg['button.unload']}" id="unload"
								actionListener="#{clientBean.unloadConsultation()}"
								update="@(.reason, .examinations, .diagnostics, .consulList)"
								icon="fa fa-arrow-up text-primary" styleClass="modelButton" />

							<p:commandButton value="#{msg['button.record']}" id="record"
								actionListener="#{clientBean.recordConsultation()}"
								update="@(.modelsCons, .consulList)" icon="ui-icon-disk"
								styleClass="modelButton" style="width:25%;" />

							<p:commandButton value="#{msg['button.remove']}" id="remove"
								actionListener="#{clientBean.removeConsultation}"
								update="@(.modelsCons, .reason, .examinations, .diagnostics, .consulList)"
								icon="fa fa-times text-danger" styleClass="modelButton" />

							<p:selectOneMenu id="modelsCons" styleClass="consulList"
								value="#{clientBean.selectedConsultationDate}"
								style=" width: 99.4% !important;">
								<p:ajax listener="#{clientBean.onConsultationChange()}" 
									update="@(.reason, .examinations, .diagnostics)" />
								<f:selectItem itemLabel="#{msg['consultation.select']}" 
									itemValue="" noSelectionOption="true" />
								<f:selectItems value="#{clientBean.consultationListDate}"
									var="consulDate"
									itemLabel="#{msg['consultation.name']}   #{consulDate}"
									itemValue="#{consulDate}" />
							</p:selectOneMenu>					

						</p:panel>


						<p:panel styleClass="panelCons">
							<h:panelGrid id="leftColone" columns="1" layout="grid"
								style="width:100%; height:100%;">

								<p:fieldset id="reasons" styleClass="consLegend"
									legend="#{msg['client.consultation.motif']}">

									<h:panelGrid columns="2" layout="grid"
										columnClasses="ui-grid-col-10,ui-grid-col-1"
										style="width:100%; height:100%;">
										<h:inputTextarea id="left" rows="3" cols="10"
											style="width:100%; " value="#{clientBean.reason}"
											styleClass="reason">

											<p:ajax event="click" update="right"
												listener="#{clientBean.updateTableConsultation( clientBean.isReason )}" />
										</h:inputTextarea>

										<p:commandButton
											actionListener="#{clientBean.updateReasons( clientBean.isReason )}"
											update="@(.rightList)" icon="fa fa-arrow-right "
											style="width:60%; float: right;" styleClass="buttonAwsome" />
									</h:panelGrid>
								</p:fieldset>



								<p:fieldset id="examinations"
									legend="#{msg['client.consultation.examination']}"
									styleClass="consLegend ">

									<h:panelGrid columns="2" layout="grid"
										columnClasses="ui-grid-col-10,ui-grid-col-1"
										style="width:100%; height:100%;">

										<h:inputTextarea id="examens"
											value="#{clientBean.examination}" rows="3" cols="10"
											style="width:100%; " styleClass="examinations">
											
											<p:ajax event="click" update="right"
												listener="#{clientBean.updateTableConsultation( clientBean.isExamination )}" />
										</h:inputTextarea>

										<p:commandButton
											actionListener="#{clientBean.updateExaminations( clientBean.isExamination )}"
											update="@(.rightList)" icon="fa fa-arrow-right "
											style="width:60%; float: right;" styleClass="buttonAwsome" />

									</h:panelGrid>
								</p:fieldset>



								<p:fieldset id="diagnostic" styleClass="consLegend "
									legend="#{msg['client.consultation.diagnostics']}">

									<h:panelGrid columns="2" layout="grid"
										columnClasses="ui-grid-col-10,ui-grid-col-1"
										style="width:100%; height:100%;">

										<h:inputTextarea id="diagnostics"
											value="#{clientBean.diagnostic}" rows="3" cols="10"
											style="width:100%; " styleClass="diagnostics">
											
											<p:ajax event="click" update="right"
												listener="#{clientBean.updateTableConsultation( clientBean.isDiagnostic )}" />
										</h:inputTextarea>

										<p:commandButton
											actionListener="#{clientBean.updateDiagnostic( clientBean.isDiagnostic )}"
											update="@(.rightList)" icon="fa fa-arrow-right "
											style="width:60%; float: right;" styleClass="buttonAwsome" />

									</h:panelGrid>
								</p:fieldset>


							</h:panelGrid>
						</p:panel>
					</div>
					<div class="ui-grid-col-5">
						<p:dataTable id="right" var="client"  
							value="#{clientBean.rightAvailable}" selectionMode="multiple"
							selection="#{clientBean.rightSelected}" rowKey="#{client}"
							emptyMessage="#{msg[clientBean.rightListName.concat('.emptyList')]}"
							widgetVar="clients" scrollable="true" scrollHeight="500"
							frozenRows="0" styleClass="rightList">
							<f:facet name="header">
								<p:outputPanel style="text-align:left;" class=" has-feedback">

									<h:inputText id="globalFilter" onkeyup="PF('clients').filter()"
										pt:placeholder="#{msg['filter.search']}"
										placeholder="#{msg['filter.search']}" icon="ui-icon-search"
										style="width:100%;" />
									<i class="glyphicon glyphicon-search form-control-feedback"></i>
								</p:outputPanel>

							</f:facet>
							<p:ajax event="rowDblselect"
								update="@(.reason, .examinations, .diagnostics)"
								listener="#{clientBean.rightToLeft}" />


							<p:column filterBy="#{client}"
								headerText="#{msg[clientBean.rightListName]}"
								filterStyle="display:none">
								<h:outputText value="#{client}" />
							</p:column>
<!-- 							<p:column style="width:56px;text-align: center"> -->
<!-- 								<p:commandButton actionListener="#{clientBean.remove(client)}" -->
<!-- 									update="@(.rightList)" icon="fa fa-times " -->
<!-- 									styleClass="buttonAwsome" /> -->
<!-- 							</p:column> -->

						</p:dataTable>


					</div>
				</div>
			</div>
		</div>
	</h:form>
	<style>
.ui-picklist-button-add-all, .ui-picklist-button-remove-all {
	visibility: hidden !important;
}

legend a {
	color: inherit;
}

legend.legendStyle {
	padding-left: 5px;
	padding-right: 5px;
}

fieldset.fsStyle {
	font-family: Verdana, Arial, sans-serif;
	font-size: small;
	font-weight: normal;
	border: 1px solid #999999;
	padding: 4px;
	margin: 5px;
}

legend.legendStyle {
	font-size: 90%;
	color: #888888;
	background: transparent;
	font-weight: bold;
}

legend {
	width: auto;
	border-bottom: 0px;
}

myFieldset .ui-fieldset, .ui-fieldset .ui-fieldset-legend {
	background: transparent;
	border-color: transparent;
}

.ui-panelgrid td {
	padding: 2px 5px;
}

.ui-button.modelButton {
	background: #f6f7f9;
	color: #4b4f56;
	text-shadow: none;
	border-radius: 0;
	font-size: 12px;
	font-weight: bold;
	padding: 0 8px;
	position: relative;
	text-align: center;
	text-shadow: none;
	vertical-align: middle;
	margin: 0 0 4px -1px !important;
	width: 25%;
}

.ui-selectonemenu-table td, .ui-selectonemenu-table tr {
	border-style: hidden !important;
}

.ui-inputfield, .ui-widget-content .ui-inputfield, .ui-widget-header .ui-inputfield
	{
	box-shadow: none;
}

.modelsCons .ui-selectonemenu-label {
	font-size: 12px;
	height: 20px;
	padding: 0 8px;
	border: none;
	border-radius: 0;
}

.modelsCons .ui-selectonemenu-trigger {
	border: none;
	background: #fff;
	border-radius: 0;
}

.ui-widget-content.panelCons {
	border: none;
	padding: 0;
}

.consLegend .ui-state-default, .reasonLegend .ui-widget-content .ui-state-default,
	.reasonLegend .ui-widget-header .ui-state-default {
	margin-bottom: 0;
	font-size: 14px;
	color: #37599a;
}

.consLegend {
	background: #f5f5f5 none repeat scroll 0 0;
}
</style>
</ui:composition>