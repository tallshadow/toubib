<ui:composition template="/template/userLayout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">

	<ui:define name="content">
	<h:form>
			<f:metadata>
				<f:viewAction action="#{clientBean.initLists}" />
			</f:metadata>
		</h:form>
		<h:form id="listPatients" styleClass="listClientsForm">

			<h:outputLabel value="#{msg['client.title']}" class="newPatientTitle"></h:outputLabel>
			<div class="ui-fluid clients">
				<p:growl id="msgs" showDetail="true" />
				<p:dataTable id="eventsDT" var="client"  styleClass="listClients" appendToBody="true"
					value="#{clientBean.clients}" selectionMode="single"
					selection="#{clientBean.selectedClient}" rowKey="#{client.id}"
					emptyMessage="#{msg['clients.emptyList']}" widgetVar="clients"
					scrollable="false" scrollHeight="500" frozenRows="0">
					<f:facet name="header">

						<p:outputPanel style="text-align:left;" class=" has-feedback">
							<p:inputText id="globalFilter" onkeyup="PF('clients').filter()"
								placeholder="#{msg['client.search']}" icon="ui-icon-search">
								<i class="glyphicon glyphicon-search form-control-feedback"></i>
							</p:inputText>
						</p:outputPanel>
					</f:facet>

					<p:ajax event="rowSelect" listener="#{clientBean.onRowSelect}"
						update=":content" />
					<p:ajax event="rowUnselect" listener="#{clientBean.onRowUnselect}"
						update=":listPatients:msgs" />

					<p:column filterBy="#{client.firstName}"
						headerText="#{msg['client.firstName']}" filterStyle="display:none">
						<h:outputText value="#{client.firstName}" />
					</p:column>

					<p:column filterBy="#{client.lastName}"
						headerText="#{msg['client.lastName']}" filterStyle="display:none">
						<h:outputText value="#{client.lastName}" />
					</p:column>
					
					<p:column filterBy="#{client.gender}"
						headerText="#{msg['client.gender']}" filterStyle="display:none">
						<h:outputText value="#{client.gender}" />
					</p:column>

					<p:column filterBy="#{client.address.phone}"
						headerText="#{msg['client.phone']}" filterStyle="display:none">
						<h:outputText value="#{client.address.phone}" />
					</p:column>

					<p:column filterBy="#{client.mutual}"
						headerText="#{msg['client.mutual']}" filterStyle="display:none">
						<h:outputText value="#{client.mutual}" />
					</p:column>

					<p:column filterBy="#{client.dateOfBirth}"
						headerText="#{msg['client.dateOfBirth']}"
						filterStyle="display:none">
						<h:outputText value="#{client.dateOfBirth}">
							<f:convertDateTime pattern="MM/dd/yyyy" type="date" />
						</h:outputText>
					</p:column>

				</p:dataTable>
			</div>
		</h:form>

		<style>
.newPatientTitle {
	color: #2f4358;
	font-size: 28px;
	font-weight: 600;
	letter-spacing: -1px;
	line-height: 55px;
	margin: 0;
	padding-left: 1%;
	background: #F1F1F1;
	width: 100%;
}

.clients {
	background: #f5f5f5 none repeat scroll 0 0;
}
</style>
	</ui:define>
</ui:composition>